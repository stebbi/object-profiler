
Introduction
------------

This is a toy project to learn a bit about Scala and the Scala toolchain. 

The code implements an "object profiler". It's somewhat analogous to a memory profiler, only different:

 - Instead of collecting information about heap space allocation, it collects information about JVM object state and relationships.

 - Instead of showing how allocated memory is divided between classes, it starts with a "root object" and shows the tree formed by the objects' member fields and bean properties, down to a configurable depth limit. 

 - Instead of inspecting how memory allocation changes between timestamps, it inspects field and property value changes in the tree formed from the root object.

Use cases
---------

One use is for debugging data loading or migration results, particularly when working against 3rd party APIs and the alternative is either long sessions in the debugger, or extensive ad hoc tracing. 

One approach is to create a synthetic, small migration set and start by recording and manually correcting an object profile. The corrected profile can then be repeatedly reconciled with new results. This process can be automated with JUnit or TestNG if the corrected profile is stored as a fixture file. 

This is a sample profile, generated by creating an image of depth 3 of a java.util.File object representing /tmp/test.txt:

  <object type="java.io.File">
    <field type="java.lang.String" name="pathSeparator">:</field>
    <field type="int" name="prefixLength">1</field>
    <field type="java.io.FileSystem" name="fs">
      <object type="java.io.UnixFileSystem">
        <field type="int" name="BA_EXISTS">1</field>
        <field type="int" name="SPACE_USABLE">2</field>
        <field type="java.lang.String" name="javaHome">
          /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
        </field>
        <field type="int" name="SPACE_TOTAL">0</field>
        <field type="int" name="BA_DIRECTORY">4</field>
        <field type="int" name="ACCESS_EXECUTE">1</field>
        <field type="java.io.ExpiringCache" name="javaHomePrefixCache">
        (...)
      </object>
    </field>
    <field type="char" name="separatorChar">/</field>
    <field type="java.lang.String" name="separator">/</field>
    <field type="char" name="pathSeparatorChar">:</field>
    <field type="long" name="serialVersionUID">301077366599181567</field>
    <field type="java.lang.String" name="path">/tmp/test.txt</field>
    <field type="boolean" name="$assertionsDisabled">true</field>
  </object>

